# ğŸ§  PDF RAG API with Pinecone and Gemini

This project provides a RESTful API to upload PDF documents, extract and chunk their content, index the content into a **Pinecone vector database**, and perform **Retrieval-Augmented Generation (RAG)** using **Google Gemini** models.

---

## ğŸš€ Features

* ğŸ“„ Upload and parse multiple PDF files (max 20 files, 1000 pages total)
* ğŸ” Query uploaded content using vector similarity via Pinecone
* ğŸ§© Auto-chunking of text for better indexing
* ğŸ¤– Semantic RAG using Gemini 2.0/2.5 (Flash)
* ğŸ“¦ Clean separation of endpoints: upload, query, and RAG

---

## ğŸ—ï¸ Tech Stack

* **Flask** â€“ Python web framework
* **PyMuPDF (fitz)** â€“ PDF text extraction
* **Pinecone** â€“ Vector database for semantic search
* **Google Gemini API** â€“ For smart query generation and answer synthesis
* **uuid, re, os** â€“ Utility & system libraries

---

## ğŸ“ Folder Structure

```
.
â”œâ”€â”€ app.py                  # Main Flask app with API routes
â”œâ”€â”€ requirements.txt        # Python dependencies
â”œâ”€â”€ .env                    # Environment variables (should be kept secret)
â””â”€â”€ temp_pdfs/              # Temporary PDF storage (auto-cleared after upload)
```

---

## âš™ï¸ Environment Variables

Create a `.env` file with the following:

```env
PINECONE_API_KEY=your_pinecone_api_key
PINECONE_INDEX_NAME=your_index_name
GEMINI=your_gemini_api_key
```

Also configure `PINECONE_NAMESPACE` in Flask config before running the app:

```python
app.config['PINECONE_NAMESPACE'] = 'your_namespace'
```

---

## ğŸ“¦ Setup Instructions

1. **Clone the repository**

```bash
git clone https://github.com/your-username/pdf-rag-api.git
cd pdf-rag-api
```

2. **Install dependencies**

```bash
pip install -r requirements.txt
```

3. **Run the server**

```bash
flask run
```

---

## ğŸ“¡ API Endpoints

### 1. `GET /`

* Health check.
* Returns: `"api is running"`

---

### 2. `POST /upload-pdfs`

* Upload 1â€“20 PDF files for parsing and indexing.
* Max 1000 pages total.

#### Form Data

| Field | Type    | Description           |
| ----- | ------- | --------------------- |
| files | File\[] | One or more PDF files |

#### Example cURL

```bash
curl -F "files=@file1.pdf" -F "files=@file2.pdf" http://localhost:5000/upload-pdfs
```

---

### 3. `POST /query`

* Perform a vector search using Pinecone.

#### JSON Body

```json
{
  "query": "What is the return policy?"
}
```

---

### 4. `POST /rag`

* Complete RAG flow:

  * Generate semantic search query via Gemini
  * Perform vector search
  * Get final answer using context + original prompt

#### JSON Body

```json
{
  "prompt": "Tell me about the refund process mentioned in the uploaded documents"
}
```

#### Returns

A well-formed answer generated by Gemini using the uploaded PDF context.

---

## ğŸ§ª Example Usage

Upload PDFs âœ Query them semantically âœ Get precise answers using Gemini + Pinecone synergy.

---

